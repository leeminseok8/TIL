## 💡 Better Way10: 대입식을 사용해 반복을 피하라

대입식은 **왈러스 연산자라고도 부른다.**('왈러스'라는 이름은 :=가 바다코끼리의 눈과 엄니처럼 보이기 때문에 붙여졌다.)

대입식은 대입문이 쓰일 수 없는 위치에서 변수에 값을 대입할 수 있으므로 유용하다. 예를 들어 if문의 조건식 안에서 대입식을 쓸 수 있다. 대입식의 값은 왈러스 연산자 왼쪽에 있는 식별자에 대입된 값으로 평가된다.

예를 들어 주스 바에서 사용할 과일 바구니를 관리한다고 하자.

```
fresh_fruit = {
    '사과' = 10,
    '바나나' = 8,
    '레몬' = 5
}

def make_lemonade(count):
    ...

def out_of_stock():
    ...

count = fresh_fruit.get('레몬', 0)
if count:
    make_lemonade(count)
else:
    out_of_stock()
```

간단해 보이는 위 코드의 문제점은 필요 이상으로 잡음이 많다는 것이다. count는 if 문의 첫 번째 블록 안에서만 쓰인다. 하지만 위와 같이 코드를 작성하면 else나 그 이후의 코드에도 영향을 미칠 것으로 예상될 것이다.

파이썬에서는 이런 식으로 값을 가져와서 0인지 아닌지 확인하는 패턴이 자주 사용된다. 이를 해결하기 위해 많은 개발자들이 꼼수를 사용해왔다(Better Way5 참고). 다행히 대입식이 파이썬에 추가되면서 이런 유형의 코드를 해결할 수 있게 됐다.

```
if count:= fresh_fruit.get('레몬', 0):
    make_lemonade(count)
else:
    out_of_stock()
```

한 줄 더 짧기도 하지만, count가 if 문의 첫 번째 블록에서만 의미가 있다는 점으로 인해 코드가 더 읽기 쉽다. 대입연산자는 변수에 값을 대입하고, if 문의 맥락에서 대입된 값을 평가해 프로그램 흐름을 어떻게 제어할지 판단한다. 이런 두 단계의 동작(대입 후 평가)이 왈러스 연산자의 핵심이다.